<!doctype html>

<html lang="fr"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Musique — redirection</title> <style> body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; margin: 2rem; color:#222; } .center { max-width:640px; margin: 0 auto; text-align:center; } .btn { display:inline-block; margin-top:1rem; padding: .6rem 1rem; background:#111; color:#fff; text-decoration:none; border-radius:6px; } .muted { color:#666; font-size:0.9rem; margin-top: .6rem; } .small { font-size:0.85rem; color:#555; margin-top:.8rem; } </style> </head> <body> <div class="center"> <h1>Connexion à la playlist</h1> <p id="msg">Chargement…</p> <a id="btn" class="btn" style="display:none" href="#" target="_blank" rel="noopener">Ouvrir la playlist</a> <p class="muted">Si la redirection ne fonctionne pas, copiez ce lien : <span id="direct-link"></span></p> <p class="small">Nouvelle piste chaque semaine — écoute gratuite, sans compte.</p> </div>

<script> const configUrl = 'config.json'; async function loadAndRedirect() { try { const r = await fetch(configUrl + '?t=' + Date.now(), {cache: 'no-store'}); if (!r.ok) throw new Error('Erreur network: ' + r.status); const cfg = await r.json(); const target = cfg.target || cfg.url; const fallbackText = cfg.fallbackText || 'Aucune cible définie pour le moment.'; document.getElementById('direct-link').textContent = target || location.href; if (target) { const btn = document.getElementById('btn'); btn.href = target; btn.style.display = 'inline-block'; document.getElementById('msg').textContent = 'Vous allez être redirigé vers la playlist…'; setTimeout(() => { window.location.replace(target); }, 900); } else { document.getElementById('msg').textContent = fallbackText; } } catch (err) { console.error(err); document.getElementById('msg').textContent = 'Impossible de charger la redirection. Essayez à nouveau ou ouvrez le lien ci-dessous.'; } } window.addEventListener('load', loadAndRedirect); </script>

</body> </html>
